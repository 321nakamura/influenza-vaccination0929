<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>インフルエンザ予防接種予約フォーム</title>
  <link rel="stylesheet" href="./style.css?v=20250929a" />
</head>
<body>
  <main class="container">
    <h1>インフルエンザ予防接種予約フォーム</h1>
    <p class="notice">
      ※ 費用は会社負担です。<br />
      ※ 一度登録された方で変更がある場合、こちらのフォームでは修正できません。<br />
      　恐れ入りますが、<strong>管理本部 総務</strong>までご連絡をお願いします。<br />
      ※ 回答期限 ：<strong class="deadline">10/1（水）</strong>
    </p>

    <form id="reservation-form" autocomplete="off">
      <div class="field">
        <label for="employeeId">1. 社員番号 <span class="req">必須</span></label>
        <input id="employeeId" name="employeeId" type="text" inputmode="numeric" pattern="[0-9/]+"
               placeholder="例）123 / 250901" required />
        <small class="hint">半角数字（「/」可）。重複登録はできません。</small>
      </div>

      <div class="field">
        <label for="department">2. 部署名 <span class="req">必須</span></label>
        <select id="department" name="department" required></select>
      </div>

      <div class="field">
        <label for="fullName">3. お名前 <span class="req">必須</span></label>
        <input id="fullName" name="fullName" type="text" placeholder="例）西川 太郎" required />
      </div>

      <div class="field">
        <label for="choice">4. 接種する／しない <span class="req">必須</span></label>
        <select id="choice" name="choice" required>
          <option value="">選択してください</option>
          <option value="接種する">接種する</option>
          <option value="接種しない">接種しない</option>
        </select>
      </div>

      <div class="field">
        <label for="place">5. 接種場所 <span class="req">必須</span></label>
        <select id="place" name="place" required>
          <option value="">選択してください</option>
          <option value="10/24バス健診">10/24バス健診</option>
          <option value="ご自身の施設予約検診時">ご自身の施設予約検診時</option>
        </select>
      </div>

      <div class="actions">
        <button type="submit" class="primary">登録する</button>
        <button type="button" id="exportCsvBtn" class="ghost admin-only">CSVをエクスポート</button>
        <button type="button" id="clearBtn" class="danger admin-only">初期化（この端末の登録を全削除）</button>
      </div>
      <p class="admin-only hint" style="margin-top:8px;">※ 初期化の前にCSVエクスポートでバックアップ取得を推奨します。</p>
    </form>

    <section class="importer admin-only">
      <h2>既存データの取り込み（任意）</h2>
      <p>過去エクスポートした CSV を読み込むと、<strong>重複チェック対象</strong>に加えられます。</p>
      <input type="file" id="csvFile" accept=".csv" />
    </section>

    <section class="admin-only">
      <h2>登録済み一覧（中央+この端末）</h2>
      <div class="table-wrap">
        <table id="list">
          <thead>
            <tr>
              <th>社員番号</th>
              <th>部署名</th>
              <th>お名前</th>
              <th>接種</th>
              <th>接種場所</th>
              <th>登録日時</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <footer>
      <details class="admin-only">
        <summary>外部連携設定（Googleスプレッドシート連携）</summary>
        <p>app.js の <code>CONFIG</code> に WebアプリURLを設定してください（POST/GET 共通）。</p>
      </details>
      <p class="copy">&copy; Nishikawa Printing Group</p>
    </footer>
  </main>

  <!-- 管理モード切替 -->
  <button id="adminToggle" title="管理モードを切替" class="admin-toggle">管理</button>

  <script src="./app.js?v=20250929a"></script>
</body>
</html>
